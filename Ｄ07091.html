<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>匯率換算工具 - 台灣專用</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: "Microsoft JhengHei", sans-serif;
      padding: 20px;
      color: #fff;
    }
    .card-custom {
      background-color: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 100%;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="card-custom text-center">
    <h1 class="mb-4"><i class="bi bi-currency-exchange me-2"></i>匯率換算工具</h1>
    
    <div class="row g-3 mb-3">
      <div class="col-12 col-md-4">
        <input type="number" id="amount" class="form-control form-control-lg text-center" placeholder="請輸入金額" min="0">
      </div>
      <div class="col-6 col-md-4">
        <select id="fromCurrency" class="form-select form-select-lg"></select>
      </div>
      <div class="col-6 col-md-4">
        <select id="toCurrency" class="form-select form-select-lg"></select>
      </div>
    </div>
    
    <button class="btn btn-primary btn-lg" onclick="convertCurrency()">
      <i class="bi bi-arrow-repeat"></i> 換算
    </button>

    <div id="result" class="mt-4"></div>
  </div>

  <script>
    const currencyList = [
      { code: "USD", name: "美元" },
      { code: "JPY", name: "日圓" },
      { code: "CNY", name: "人民幣" },
      { code: "EUR", name: "歐元" },
      { code: "HKD", name: "港幣" },
      { code: "SGD", name: "新加坡幣" },
      { code: "TWD", name: "新台幣" },
      { code: "THB", name: "泰銖" },
      { code: "KRW", name: "韓圓" },
      { code: "AUD", name: "澳幣" }
    ];

    window.onload = () => {
      const fromSelect = document.getElementById("fromCurrency");
      const toSelect = document.getElementById("toCurrency");

      currencyList.forEach(cur => {
        fromSelect.innerHTML += `<option value="${cur.code}">${cur.code} - ${cur.name}</option>`;
        toSelect.innerHTML += `<option value="${cur.code}">${cur.code} - ${cur.name}</option>`;
      });

      fromSelect.value = "USD";
      toSelect.value = "TWD";
    };

    function formatNumber(num) {
      return num.toLocaleString("zh-TW", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function convertCurrency() {
      const amount = parseFloat(document.getElementById("amount").value);
      const from = document.getElementById("fromCurrency").value;
      const to = document.getElementById("toCurrency").value;

      if (isNaN(amount) || amount <= 0) {
        alert("請輸入有效的金額！");
        return;
      }

      if (from === to) {
        document.getElementById("result").innerHTML = `
          <div class="alert alert-info">相同貨幣，結果為：<strong>${formatNumber(amount)}</strong> ${from}</div>
        `;
        return;
      }

      const url = `https://api.frankfurter.app/latest?amount=${amount}&from=${from}&to=${to}`;
      document.getElementById("result").innerHTML = `<div class="text-primary">查詢中，請稍候...</div>`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const rate = data.rates[to];
          const date = data.date;
          document.getElementById("result").innerHTML = `
            <div class="alert alert-success text-start">
              <h5 class="fw-bold mb-3">${formatNumber(amount)} ${from} 換算結果</h5>
              <p class="mb-1">
                <i class="bi bi-arrow-right-circle-fill text-success me-2"></i>
                <strong>${formatNumber(rate)} ${to}</strong>
              </p>
              <p class="mb-1 text-muted small">匯率更新日期：${date}</p>
            </div>
          `;
        })
        .catch(() => {
          document.getElementById("result").innerHTML = `
            <div class="alert alert-danger">查詢失敗，請稍後再試。</div>
          `;
        });
    }
  </script>
</body>
</html>
